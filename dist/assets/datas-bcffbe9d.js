/*! 
 Build based on gin-vue-admin 
 Time : 1705585352000 */
import{a,o as t,c as e,d as o,b as r,w as l,g as u,M as i,N as s,h as n,t as d,k as h,E as c}from"./index-0efc4537.js";import{E as y,a as m}from"./checkbox-aefa5e2d.js";/* empty css               */import{s as f}from"./authority-0dff6ed3.js";import{W as p}from"./warningBar-5328b630.js";import"./isEqual-aa7e7ef2.js";import"./_Uint8Array-4999d338.js";import"./hasIn-deea815f.js";/* empty css             */const v={class:"sticky top-0.5 z-10 bg-white my-4"},I={class:"clear-both pt-4"},g=Object.assign({name:"Datas"},{__name:"datas",props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(g,{expose:w,emit:j}){const A=g,b=a([]),_=a(!1),k=a=>{a&&a.forEach((a=>{const t={};t.authorityId=a.authorityId,t.authorityName=a.authorityName,b.value.push(t),a.children&&a.children.length&&k(a.children)}))},x=a([]);k(A.authority),A.row.dataAuthorityId&&A.row.dataAuthorityId.forEach((a=>{const t=b.value&&b.value.filter((t=>t.authorityId===a.authorityId))&&b.value.filter((t=>t.authorityId===a.authorityId))[0];x.value.push(t)}));const C=j,E=()=>{x.value=[...b.value],C("changeRow","dataAuthorityId",x.value),_.value=!0},N=()=>{x.value=b.value.filter((a=>a.authorityId===A.row.authorityId)),C("changeRow","dataAuthorityId",x.value),_.value=!0},R=()=>{const a=[];O(A.row,a),x.value=b.value.filter((t=>a.indexOf(t.authorityId)>-1)),C("changeRow","dataAuthorityId",x.value),_.value=!0},O=(a,t)=>{t.push(a.authorityId),a.children&&a.children.forEach((a=>{O(a,t)}))},V=async()=>{0===(await f(A.row)).code&&h({type:"success",message:"资源设置成功"})},U=()=>{C("changeRow","dataAuthorityId",x.value),_.value=!0};return w({enterAndNext:()=>{V()},needConfirm:_}),(a,h)=>{const f=c,g=y,w=m;return t(),e("div",null,[o(p,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）。此功能不建议使用，建议使用插件市场【组织管理功能（点击前往）】来管理资源权限。",href:"https://plugin.gin-vue-admin.com/#/layout/newPluginInfo?id=36"}),r("div",v,[o(f,{class:"float-left",type:"primary",onClick:E},{default:l((()=>[u("全选")])),_:1}),o(f,{class:"float-left",type:"primary",onClick:N},{default:l((()=>[u("本角色")])),_:1}),o(f,{class:"float-left",type:"primary",onClick:R},{default:l((()=>[u("本角色及子角色")])),_:1}),o(f,{class:"float-right",type:"primary",onClick:V},{default:l((()=>[u("确 定")])),_:1})]),r("div",I,[o(w,{modelValue:x.value,"onUpdate:modelValue":h[0]||(h[0]=a=>x.value=a),onChange:U},{default:l((()=>[(t(!0),e(i,null,s(b.value,((a,e)=>(t(),n(g,{key:e,label:a},{default:l((()=>[u(d(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])])}}});export{g as default};
