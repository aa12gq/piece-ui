/*! 
 Build based on gin-vue-admin 
 Time : 1705585352000 */
import{s as e,a,o as t,c as l,d as o,b as s,w as r,g as i,t as u,G as m,k as p,E as n,l as d}from"./index-0efc4537.js";import{E as c}from"./dialog-2a3abe36.js";import"./overlay-73152bda.js";import{a as v,E as f}from"./form-150c0e00.js";/* empty css                  *//* empty css              */import{E as j}from"./pagination-956e76f8.js";import"./tag-c095386a.js";import"./select-59043028.js";import"./scrollbar-ab08f6f1.js";/* empty css               */import{E as g,a as y}from"./table-column-ce6481a3.js";import"./checkbox-aefa5e2d.js";/* empty css                */import{E as b}from"./popover-a0fd8f33.js";/* empty css               */import{W as h}from"./warningBar-5328b630.js";import{f as w}from"./format-16a20050.js";import"./refs-04938f0e.js";import"./isUndefined-d281c39a.js";import"./castArray-f160d2a3.js";import"./_baseClone-9af99e91.js";import"./_Uint8Array-4999d338.js";import"./_initCloneObject-b273bb42.js";import"./isEqual-aa7e7ef2.js";import"./hasIn-deea815f.js";import"./index-70d4cce8.js";import"./index-c5b62cef.js";import"./strings-a95e1d29.js";import"./debounce-994b39f4.js";import"./index-4b62258d.js";import"./dropdown-b49e545a.js";/* empty css             */import"./date-8358c12f.js";import"./dictionary-a221ccab.js";import"./sysDictionary-871dfba3.js";const k=a=>e({url:"/customer/customer",method:"post",data:a}),_={class:"gva-table-box"},C={class:"gva-btn-list"},V=s("p",null,"确定要删除吗？",-1),x={style:{"text-align":"right","margin-top":"8px"}},D={class:"gva-pagination"},I={class:"dialog-footer"},z=Object.assign({name:"Customer"},{__name:"customer",setup(z){const U=a({customerName:"",customerPhoneData:""}),E=a(1),N=a(0),P=a(10),A=a([]),O=e=>{P.value=e,L()},S=e=>{E.value=e,L()},L=async()=>{const a=await(t={page:E.value,pageSize:P.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(A.value=a.data.list,N.value=a.data.total,E.value=a.data.page,P.value=a.data.pageSize)};L();const q=a(!1),B=a(""),F=async a=>{const t=await(l={ID:a.ID},e({url:"/customer/customer",method:"get",params:l}));var l;B.value="update",0===t.code&&(U.value=t.data.customer,q.value=!0)},G=()=>{q.value=!1,U.value={customerName:"",customerPhoneData:""}},K=async a=>{a.visible=!1;var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(p({type:"success",message:"删除成功"}),1===A.value.length&&E.value>1&&E.value--,L())},M=async()=>{let a;switch(B.value){case"create":default:a=await k(U.value);break;case"update":a=await(t=U.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(G(),L())},T=()=>{B.value="create",q.value=!0};return(e,a)=>{const p=n,k=g,z=b,L=y,B=j,W=d,H=v,J=f,Q=c;return t(),l("div",null,[o(h,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",_,[s("div",C,[o(p,{type:"primary",icon:"plus",onClick:T},{default:r((()=>[i("新增")])),_:1})]),o(L,{ref:"multipleTable",data:A.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:r((()=>[o(k,{type:"selection",width:"55"}),o(k,{align:"left",label:"接入日期",width:"180"},{default:r((e=>[s("span",null,u(m(w)(e.row.CreatedAt)),1)])),_:1}),o(k,{align:"left",label:"姓名",prop:"customerName",width:"120"}),o(k,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),o(k,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),o(k,{align:"left",label:"操作","min-width":"160"},{default:r((e=>[o(p,{type:"primary",link:"",icon:"edit",onClick:a=>F(e.row)},{default:r((()=>[i("变更")])),_:2},1032,["onClick"]),o(z,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:r((()=>[o(p,{type:"primary",link:"",icon:"delete",onClick:a=>e.row.visible=!0},{default:r((()=>[i("删除")])),_:2},1032,["onClick"])])),default:r((()=>[V,s("div",x,[o(p,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:r((()=>[i("取消")])),_:2},1032,["onClick"]),o(p,{type:"primary",onClick:a=>K(e.row)},{default:r((()=>[i("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),s("div",D,[o(B,{"current-page":E.value,"page-size":P.value,"page-sizes":[10,30,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:S,onSizeChange:O},null,8,["current-page","page-size","total"])])]),o(Q,{modelValue:q.value,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value=e),"before-close":G,title:"客户"},{footer:r((()=>[s("div",I,[o(p,{onClick:G},{default:r((()=>[i("取 消")])),_:1}),o(p,{type:"primary",onClick:M},{default:r((()=>[i("确 定")])),_:1})])])),default:r((()=>[o(J,{inline:!0,model:U.value,"label-width":"80px"},{default:r((()=>[o(H,{label:"客户名"},{default:r((()=>[o(W,{modelValue:U.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),o(H,{label:"客户电话"},{default:r((()=>[o(W,{modelValue:U.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{z as default};
