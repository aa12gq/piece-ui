/*! 
 Build based on gin-vue-admin 
 Time : 1705585352000 */
import{a as e,ab as a,O as t,o as s,c as i,d as l,b as r,q as n,w as o,g as d,t as u,l as p,E as m}from"./index-0efc4537.js";import{E as c}from"./pagination-956e76f8.js";/* empty css              */import"./tag-c095386a.js";import"./select-59043028.js";import"./scrollbar-ab08f6f1.js";/* empty css               */import{E as h,a as g}from"./table-column-ce6481a3.js";import"./checkbox-aefa5e2d.js";/* empty css                *//* empty css               */import{k as f}from"./registerTask-9f09bb27.js";import{W as v}from"./warningBar-5328b630.js";import{f as b}from"./date-8358c12f.js";import"./isEqual-aa7e7ef2.js";import"./_Uint8Array-4999d338.js";import"./hasIn-deea815f.js";import"./index-70d4cce8.js";import"./isUndefined-d281c39a.js";import"./index-c5b62cef.js";import"./strings-a95e1d29.js";import"./debounce-994b39f4.js";import"./index-4b62258d.js";import"./_initCloneObject-b273bb42.js";/* empty css             */const y={class:"authority"},j={class:"gva-table-box"},_=r("div",{class:"gva-btn-list"},null,-1),w={class:"gva-btn-list"},x={class:"flex space-x-4"},k={class:"flex items-center px-2 border-t border-b py-2 border-slate-200/60 dark:border-darkmode-400"},C=r("div",{class:"font-medium mr-2"},"当前任务:",-1),I={class:"bg-slate-400 rounded text-slate-100 px-2 text-sm"},z=Object.assign({name:"Staff"},{__name:"subtask",setup(z){const D=e(1),E=e(0),M=e(10),S=e(null),P=a(),O=e(""),R=e(""),T=e(""),U=e=>{D.value=e,F()},V=e=>{M.value=e,F()},q=async()=>{T.value=R.value,await F()},A=()=>{R.value="",T.value="",F()},F=async()=>{const e=await f(D.value,M.value,P.params.id,T.value);0===e.code&&(e.data.list.forEach((e=>{e.created_time=e.created_time?b(e.created_time,"yyyy-MM-dd hh:mm:ss"):"",e.updated_time=e.updated_time?b(e.updated_time,"yyyy-MM-dd hh:mm:ss"):"",e.scheduled_time=e.scheduled_time?b(e.scheduled_time,"yyyy-MM-dd hh:mm:ss"):""})),S.value=[],setTimeout((()=>{S.value=e.data.list,console.log(S.value)}),100),E.value=e.data.total,D.value=e.data.page,M.value=e.data.pageSize)};t((async()=>{F()}));const K=e=>{switch(e){case"Init":return"初始化";case"Pending":return"等待";case"Success":return"已成功";case"Failed":return"失败";case"Running":return"运行中";case"Pause":return"已暂停";case"Disabled":return"不可用";default:return""}},B=e=>{switch(e){case"Init":case"Running":return"info";case"Pending":return"warning";case"Success":return"success";case"Failed":case"Pause":case"Disabled":return"danger";default:return""}};return(e,a)=>{const t=p,f=m,b=h,z=g,D=c;return s(),i("div",y,[l(v,{title:"任务筛号列表"}),r("div",j,[_,r("div",w,[r("div",x,[l(t,{modelValue:R.value,"onUpdate:modelValue":a[0]||(a[0]=e=>R.value=e),placeholder:"请输入手机号码",clearable:"",style:{width:"200px"},onClear:A,onKeyup:n(e.searchTask,["enter","native"])},null,8,["modelValue","onKeyup"]),l(f,{type:"primary",icon:"Search",onClick:q},{default:o((()=>[d("搜索")])),_:1}),l(f,{color:"#626aef",icon:"refresh",dark:e.isDark,plain:"",onClick:F},{default:o((()=>[d("刷新")])),_:1},8,["dark"])])]),r("div",k,[C,r("span",I,u(O.value),1)]),l(z,{data:S.value,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"authorityId",style:{width:"100%"}},{default:o((()=>[l(b,{label:"ID","min-width":"180",prop:"ID"}),l(b,{label:"任务ID","min-width":"180",prop:"main_task_id"}),l(b,{align:"left",label:"手机号码","min-width":"180",prop:"phone"}),l(b,{align:"left",label:"任务状态","min-width":"180"},{default:o((({row:e})=>[l(f,{type:B(e.status),size:"small","loading-icon":"Eleme",loading:"Running"==e.status,plain:""},{default:o((()=>[d(u(K(e.status)),1)])),_:2},1032,["type","loading"])])),_:1}),l(b,{align:"left",label:"任务信息","min-width":"180",prop:"task_info"}),l(b,{align:"left",label:"调度时间","min-width":"180",prop:"scheduled_time"}),l(b,{align:"left",label:"创建时间","min-width":"180",prop:"created_time"}),l(b,{align:"left",label:"更新时间","min-width":"180",prop:"updated_time"})])),_:1},8,["data"]),l(D,{"current-page":e.page,"page-size":M.value,"page-sizes":[10,30,50,100],total:E.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:U,onSizeChange:V},null,8,["current-page","page-size","total"])])])}}});export{z as default};
