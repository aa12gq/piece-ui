/*! 
 Build based on gin-vue-admin 
 Time : 1705585352000 */
import{x as e,a,o as l,c as t,b as o,d as u,w as r,g as s,M as i,N as d,h as n,k as m,E as c,l as p,P as v}from"./index-0efc4537.js";import{E as f}from"./dialog-2a3abe36.js";import"./overlay-73152bda.js";import{E as j}from"./form-150c0e00.js";/* empty css              */import"./tag-c095386a.js";import{E as g,a as _}from"./select-59043028.js";import"./scrollbar-ab08f6f1.js";/* empty css               */import{E as b,a as y}from"./tab-pane-5f57c34e.js";import{E as h}from"./pagination-956e76f8.js";/* empty css               */import{_ as V,e as w}from"./soldAccount.vue_vue_type_script_setup_true_lang-586d7f5a.js";import x from"./record-acc5246e.js";import{g as k}from"./country-15c2ea1e.js";import{W as C}from"./warningBar-5328b630.js";import{g as U}from"./accoutTag-60f16314.js";import{g as A}from"./accoutGroup-85ef6fd8.js";import"./refs-04938f0e.js";import"./isUndefined-d281c39a.js";import"./castArray-f160d2a3.js";import"./_baseClone-9af99e91.js";import"./_Uint8Array-4999d338.js";import"./_initCloneObject-b273bb42.js";import"./isEqual-aa7e7ef2.js";import"./hasIn-deea815f.js";import"./index-70d4cce8.js";import"./index-c5b62cef.js";import"./strings-a95e1d29.js";import"./debounce-994b39f4.js";import"./index-4b62258d.js";import"./table-column-ce6481a3.js";import"./checkbox-aefa5e2d.js";/* empty css                */import"./_plugin-vue_export-helper-1b428a4d.js";/* empty css             */const z={class:"gva-table-box"},E={class:"p-3"},I={class:"dialog-footer"},T=e({__name:"index",setup(e){const T=a("first"),D=(e,a)=>{console.log(e,a)},F=a(1),L=a(0),M=a(10),R=a([]),S=e=>{F.value=e},O=e=>{M.value=e},B=a({count:null,country_id:"",format:null,tag_id:null,group_id:null}),q=a(null),G=()=>{v((()=>{q.value?q.value.resetFields():console.error("The form reference 'Form' is not available.")})),Z(),J(),(async()=>{const e=await k(1,300);0===e.code&&Array.isArray(e.data.list)&&(R.value=[],setTimeout((()=>{R.value=e.data.list}),100),L.value=e.data.total,F.value=e.data.page,M.value=e.data.pageSize)})(),B.value={count:null,country_id:null,format:null,tag_id:null,group_id:null}},K=()=>{G(),P.value=!1},N=a("导出账号"),P=a(!1),W=a(""),X=a([]),Z=async()=>{const e=await A(1,100);0===e.code&&Array.isArray(e.data.list)&&(X.value=[],setTimeout((()=>{X.value=e.data.list}),100),L.value=e.data.total,F.value=e.data.page,M.value=e.data.pageSize)},H=a([]),J=async()=>{const e=await U(1,100);0===e.code&&(H.value=[],setTimeout((()=>{H.value=e.data.list}),100),L.value=e.data.total,F.value=e.data.page,M.value=e.data.pageSize)},Q=async()=>{await q.value.validate((async e=>{if(e)switch(W.value){case"export":await(async(e,a)=>{try{m.info("准备下载，请稍候...");const l=await e();if(l&&l.data){const e=new Blob([l.data],{type:"text/plain"});setTimeout((()=>{const l=window.URL.createObjectURL(e),t=document.createElement("a");t.href=l,t.setAttribute("download",a),document.body.appendChild(t),t.click(),URL.revokeObjectURL(l),document.body.removeChild(t),m.success("下载成功")}),3e3)}else m.error("下载失败，没有获取到文件内容")}catch(l){m.error("下载出错"),console.error("下载出错",l)}})((()=>w(B.value)),"导出账号.txt");break;case"edit":break;default:m({type:"error",message:"未知操作",showClose:!0})}}))};return(e,a)=>{const m=c,v=h,w=b,k=y,U=g,A=_,Z=p,J=j,Y=f;return l(),t("div",z,[o("div",E,[u(m,{type:"primary",onClick:a[0]||(a[0]=e=>(e=>{switch(e){case"export":N.value="导出账号";break;case"edit":N.value="编辑"}W.value=e,P.value=!0,G()})("export"))},{default:r((()=>[s("导出账号")])),_:1})]),u(k,{modelValue:T.value,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value=e),type:"card",stretch:"",class:"demo-tabs",onTabClick:D},{default:r((()=>[u(w,{label:"库存",name:"first",class:"-mt-4"},{default:r((()=>[u(V),u(v,{"current-page":F.value,"page-size":M.value,"page-sizes":[10,30,50,100],total:L.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:S,onSizeChange:O},null,8,["current-page","page-size","total"])])),_:1}),u(w,{label:"卖号记录",name:"second"},{default:r((()=>[u(x)])),_:1})])),_:1},8,["modelValue"]),u(Y,{modelValue:P.value,"onUpdate:modelValue":a[7]||(a[7]=e=>P.value=e),"before-close":K,title:N.value},{footer:r((()=>[o("div",I,[u(m,{onClick:K},{default:r((()=>[s("取 消")])),_:1}),u(m,{type:"primary",onClick:Q},{default:r((()=>[s("确 定")])),_:1})])])),default:r((()=>[u(C,{title:"导出账号"}),u(J,{ref_key:"Form",ref:q,model:B.value,"label-width":"80px",class:"space-y-6"},{default:r((()=>[u(A,{modelValue:B.value.country_id,"onUpdate:modelValue":a[2]||(a[2]=e=>B.value.country_id=e),filterable:"",placeholder:"请选择国家区号",style:{width:"100%"}},{default:r((()=>[(l(!0),t(i,null,d(R.value,(e=>(l(),n(U,{key:e.ID,label:"".concat(e.code," ").concat(e.name," ").concat(e.dialingCode),value:e.ID},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),u(A,{modelValue:B.value.group_id,"onUpdate:modelValue":a[3]||(a[3]=e=>B.value.group_id=e),modelModifiers:{number:!0},placeholder:"请选择分组",class:"w-full"},{default:r((()=>[(l(!0),t(i,null,d(X.value,(e=>(l(),n(U,{key:e.ID,label:e.name,value:e.ID},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),u(A,{modelValue:B.value.tag_id,"onUpdate:modelValue":a[4]||(a[4]=e=>B.value.tag_id=e),modelModifiers:{number:!0},placeholder:"请选择标签",class:"w-full"},{default:r((()=>[(l(!0),t(i,null,d(H.value,(e=>(l(),n(U,{key:e.ID,label:e.name,value:e.ID},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),u(Z,{modelValue:B.value.count,"onUpdate:modelValue":a[5]||(a[5]=e=>B.value.count=e),placeholder:"导出数量",autocomplete:"off"},null,8,["modelValue"]),u(A,{modelValue:B.value.format,"onUpdate:modelValue":a[6]||(a[6]=e=>B.value.format=e),placeholder:"导出格式",class:"w-full"},{default:r((()=>[(l(),n(U,{key:1,label:"6列数据格式(逗号分割)",value:1}))])),_:1},8,["modelValue"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}});export{T as default};
