/*! 
 Build based on gin-vue-admin 
 Time : 1705585352000 */
import{a,ab as e,O as t,o as s,c as r,d as o,b as l,q as i,w as n,g as d,t as c,k as p,l as u,E as m}from"./index-0efc4537.js";import{E as b}from"./pagination-956e76f8.js";/* empty css              */import"./tag-c095386a.js";import"./select-59043028.js";import"./scrollbar-ab08f6f1.js";/* empty css               */import{E as h,a as v}from"./table-column-ce6481a3.js";import"./checkbox-aefa5e2d.js";/* empty css                *//* empty css               */import{g as y,f,d as g,a as j}from"./sieve-07c29ea9.js";import{W as w}from"./warningBar-5328b630.js";import{f as k}from"./date-8358c12f.js";import"./isEqual-aa7e7ef2.js";import"./_Uint8Array-4999d338.js";import"./hasIn-deea815f.js";import"./index-70d4cce8.js";import"./isUndefined-d281c39a.js";import"./index-c5b62cef.js";import"./strings-a95e1d29.js";import"./debounce-994b39f4.js";import"./index-4b62258d.js";import"./_initCloneObject-b273bb42.js";/* empty css             */const x={class:"authority"},C={class:"gva-table-box"},_=l("div",{class:"gva-btn-list"},null,-1),A={class:"gva-btn-list"},U={class:"flex space-x-4"},D={class:"flex items-center px-2 border-t border-b py-2 border-slate-200/60 dark:border-darkmode-400"},E=l("div",{class:"font-medium mr-2"},"当前任务:",-1),L={class:"bg-slate-400 rounded text-slate-100 px-2 text-sm"},R=Object.assign({name:"Staff"},{__name:"sieve_number",setup(R){const z=a(1),O=a(0),S=a(10),I=a(null),N=e(),$=a(""),M=a(""),T=a(""),B=a=>{z.value=a,P()},V=a=>{S.value=a,P()},q=async()=>{T.value=M.value,await P()},K=()=>{M.value="",T.value="",P()},P=async()=>{const a=await y(z.value,S.value,N.params.id,T.value);0===a.code&&(a.data.list.forEach((a=>{a.createdAt=a.createdAt?k(a.createdAt,"yyyy-MM-dd hh:mm:ss"):"",a.updatedAt=a.updatedAt?k(a.updatedAt,"yyyy-MM-dd hh:mm:ss"):""})),I.value=[],setTimeout((()=>{I.value=a.data.list}),100),O.value=a.data.total,z.value=a.data.page,S.value=a.data.pageSize)},W=async a=>{try{const a=await g(String(N.params.id));if(a&&a.data){console.log("开始下载禁用账号",a);const e=new Blob([a.data],{type:"text/plain"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.setAttribute("download","disable_accounts.txt"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)}else p.error("下载禁用账号失败：没有数据返回")}catch(e){console.error("下载出错",e)}},F=async()=>{try{const a=await j(String(N.params.id));if(a&&a.data){console.log("开始下载存活账号",a);const e=new Blob([a.data],{type:"text/plain"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.setAttribute("download","normal_accounts.txt"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)}else console.error("下载存活账号失败：没有数据返回")}catch(a){p.error(a||"下载出错"),console.error("下载出错",a)}};t((async()=>{await(async()=>{const a=N.params.id,e=await f(a);e&&e.data&&e.data.resieveTask.taskName&&($.value=e.data.resieveTask.taskName)})(),P()}));const G=a=>{switch(a){case"Normal":return"存活";case"Disable":return"禁用";case"Permanent":return"永久";default:return""}},H=a=>{switch(a){case"Disable":case"Permanent":return"danger";case"Normal":return"success";default:return""}};return(a,e)=>{const t=u,p=m,y=h,f=v,g=b;return s(),r("div",x,[o(w,{title:"任务筛号列表"}),l("div",C,[_,l("div",A,[l("div",U,[o(t,{modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=a=>M.value=a),placeholder:"请输入手机号码",clearable:"",style:{width:"200px"},onClear:K,onKeyup:i(a.searchTask,["enter","native"])},null,8,["modelValue","onKeyup"]),o(p,{type:"primary",icon:"Search",onClick:q},{default:n((()=>[d("搜索")])),_:1}),o(p,{type:"primary",icon:"Download",disabled:!a.$route.params.id||0===a.$route.params.id,onClick:F},{default:n((()=>[d("导出存活账号")])),_:1},8,["disabled"]),o(p,{type:"primary",icon:"Download",disabled:!a.$route.params.id||0===a.$route.params.id,onClick:W},{default:n((()=>[d("导出禁用账号")])),_:1},8,["disabled"]),o(p,{color:"#626aef",icon:"refresh",dark:a.isDark,plain:"",onClick:P},{default:n((()=>[d("刷新")])),_:1},8,["dark"])])]),l("div",D,[E,l("span",L,c($.value),1)]),o(f,{data:I.value,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"authorityId",style:{width:"100%"}},{default:n((()=>[o(y,{label:"ID","min-width":"180",prop:"ID"}),o(y,{label:"任务ID","min-width":"180",prop:"task_id"}),o(y,{align:"left",label:"手机号码","min-width":"180",prop:"phoneNumber"}),o(y,{align:"left",label:"状态","min-width":"180",prop:"Status"},{default:n((({row:e})=>[o(p,{type:H(e.status),size:"small","loading-icon":a.Eleme,plain:""},{default:n((()=>[d(c(G(e.status)),1)])),_:2},1032,["type","loading-icon"])])),_:1}),o(y,{align:"left",label:"创建时间","min-width":"180",prop:"createdAt"}),o(y,{align:"left",label:"更新时间","min-width":"180",prop:"updatedAt"})])),_:1},8,["data"]),o(g,{"current-page":a.page,"page-size":S.value,"page-sizes":[10,30,50,100],total:O.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:V},null,8,["current-page","page-size","total"])])])}}});export{R as default};
