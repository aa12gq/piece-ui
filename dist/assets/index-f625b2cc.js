/*! 
 Build based on gin-vue-admin 
 Time : 1705585352000 */
import{u as a,a as t,o as e,c as i,b as n,d as o,w as l,g as s,t as r,G as p,h as c,U as d,k as m,E as u}from"./index-0efc4537.js";import{E as f}from"./pagination-956e76f8.js";/* empty css              */import"./tag-c095386a.js";import"./select-59043028.js";import"./scrollbar-ab08f6f1.js";/* empty css               */import{E as g,a as y}from"./table-column-ce6481a3.js";import"./checkbox-aefa5e2d.js";/* empty css                *//* empty css               */import{f as j,h as b,r as w}from"./autoCode-a45db78d.js";import{f as h}from"./format-16a20050.js";import{E as v}from"./index-c5b62cef.js";import"./isEqual-aa7e7ef2.js";import"./_Uint8Array-4999d338.js";import"./hasIn-deea815f.js";import"./index-70d4cce8.js";import"./isUndefined-d281c39a.js";import"./strings-a95e1d29.js";import"./debounce-994b39f4.js";import"./index-4b62258d.js";import"./_initCloneObject-b273bb42.js";import"./date-8358c12f.js";import"./dictionary-a221ccab.js";import"./sysDictionary-871dfba3.js";const k={class:"gva-table-box"},x={class:"gva-btn-list"},C={class:"gva-pagination"},_=Object.assign({name:"AutoCodeAdmin"},{__name:"index",setup(_){const T=a(),B=t(1),N=t(0),z=t(10),I=t([]),D=a=>{z.value=a,A()},E=a=>{B.value=a,A()},A=async()=>{const a=await j({page:B.value,pageSize:z.value});0===a.code&&(I.value=a.data.list,N.value=a.data.total,B.value=a.data.page,z.value=a.data.pageSize)};A();const O=async(a,t)=>{t?d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await w({id:Number(a.ID),deleteTable:t})).code&&(m.success("回滚成功"),A())}))}))})):d.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await w({id:Number(a.ID),deleteTable:t})).code&&(m.success("回滚成功"),A())}))},S=a=>{a?T.push({name:"autoCodeEdit",params:{id:a.ID}}):T.push({name:"autoCode"})};return(a,t)=>{const j=u,w=g,_=v,T=y,U=f;return e(),i("div",null,[n("div",k,[n("div",x,[o(j,{type:"primary",icon:"plus",onClick:t[0]||(t[0]=a=>S(null))},{default:l((()=>[s("新增")])),_:1})]),o(T,{data:I.value},{default:l((()=>[o(w,{type:"selection",width:"55"}),o(w,{align:"left",label:"id",width:"60",prop:"ID"}),o(w,{align:"left",label:"日期",width:"180"},{default:l((a=>[s(r(p(h)(a.row.CreatedAt)),1)])),_:1}),o(w,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),o(w,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),o(w,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),o(w,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:l((a=>[a.row.flag?(e(),c(_,{key:0,type:"danger",effect:"dark"},{default:l((()=>[s(" 已回滚 ")])),_:1})):(e(),c(_,{key:1,type:"success",effect:"dark"},{default:l((()=>[s(" 未回滚 ")])),_:1}))])),_:1}),o(w,{align:"left",label:"操作","min-width":"240"},{default:l((a=>[n("div",null,[o(j,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>O(a.row,!0)},{default:l((()=>[s("回滚(删表)")])),_:2},1032,["disabled","onClick"]),o(j,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>O(a.row,!1)},{default:l((()=>[s("回滚(不删表)")])),_:2},1032,["disabled","onClick"]),o(j,{type:"primary",link:"",onClick:t=>S(a.row)},{default:l((()=>[s("复用")])),_:2},1032,["onClick"]),o(j,{type:"primary",link:"",onClick:t=>(async a=>{d.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await b({id:Number(a.ID)})).code&&(m.success("删除成功"),A())}))})(a.row)},{default:l((()=>[s("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),n("div",C,[o(U,{"current-page":B.value,"page-size":z.value,"page-sizes":[10,30,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:E,onSizeChange:D},null,8,["current-page","page-size","total"])])])])}}});export{_ as default};
